var He=Object.create;var G=Object.defineProperty;var Be=Object.getOwnPropertyDescriptor;var Ne=Object.getOwnPropertyNames;var Ve=Object.getPrototypeOf,je=Object.prototype.hasOwnProperty;var Ue=(r,t)=>{for(var o in t)G(r,o,{get:t[o],enumerable:!0})},ye=(r,t,o,p)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Ne(t))!je.call(r,n)&&n!==o&&G(r,n,{get:()=>t[n],enumerable:!(p=Be(t,n))||p.enumerable});return r};var ce=(r,t,o)=>(o=r!=null?He(Ve(r)):{},ye(t||!r||!r.__esModule?G(o,"default",{value:r,enumerable:!0}):o,r)),$e=r=>ye(G({},"__esModule",{value:!0}),r);var _e={};Ue(_e,{Deferred:()=>ke,Head:()=>Re,Link:()=>Ie,WhenVisible:()=>Me,createInertiaApp:()=>le,router:()=>Ke,useForm:()=>me,usePage:()=>q,usePoll:()=>ge,usePrefetch:()=>Pe,useRemember:()=>B});module.exports=$e(_e);var Le=require("@inertiajs/core");var Z=require("@inertiajs/core"),ve=require("react");var _=require("@inertiajs/core"),C=require("react");var he=require("react"),Se=(0,he.createContext)(void 0);Se.displayName="InertiaHeadContext";var W=Se;var Te=require("react"),Fe=(0,Te.createContext)(void 0);Fe.displayName="InertiaPageContext";var K=Fe;function X({children:r,initialPage:t,initialComponent:o,resolveComponent:p,titleCallback:n,onHeadUpdate:d}){let[c,g]=(0,C.useState)({component:o||null,page:t,key:null}),m=(0,C.useMemo)(()=>(0,_.createHeadManager)(typeof window>"u",n||(l=>l),d||(()=>{})),[]);if((0,C.useEffect)(()=>{_.router.init({initialPage:t,resolveComponent:p,swapComponent:async({component:l,page:e,preserveState:f})=>{g(s=>({component:l,page:e,key:f?s.key:Date.now()}))}}),_.router.on("navigate",()=>m.forceUpdate())},[]),!c.component)return(0,C.createElement)(W.Provider,{value:m},(0,C.createElement)(K.Provider,{value:c.page},null));let P=r||(({Component:l,props:e,key:f})=>{let s=(0,C.createElement)(l,{key:f,...e});return typeof l.layout=="function"?l.layout(s):Array.isArray(l.layout)?l.layout.concat(s).reverse().reduce((S,T)=>(0,C.createElement)(T,{children:S,...e})):s});return(0,C.createElement)(W.Provider,{value:m},(0,C.createElement)(K.Provider,{value:c.page},P({Component:c.component,key:c.key,props:c.page.props})))}X.displayName="Inertia";async function le({id:r="app",resolve:t,setup:o,title:p,progress:n={},page:d,render:c}){let g=typeof window>"u",m=g?null:document.getElementById(r),P=d||JSON.parse(m.dataset.page),l=s=>Promise.resolve(t(s)).then(S=>S.default||S),e=[],f=await Promise.all([l(P.component),Z.router.decryptHistory().catch(()=>{})]).then(([s])=>o({el:m,App:X,props:{initialPage:P,initialComponent:s,resolveComponent:l,titleCallback:p,onHeadUpdate:g?S=>e=S:null}}));if(!g&&n&&(0,Z.setupProgress)(n),g){let s=await c((0,ve.createElement)("div",{id:r,"data-page":JSON.stringify(P)},f));return{head:e,body:s}}}var ee=require("react");var be=require("react");function q(){let r=(0,be.useContext)(K);if(!r)throw new Error("usePage must be used within the Inertia component");return r}var Ce=({children:r,data:t,fallback:o})=>{if(!t)throw new Error("`<Deferred>` requires a `data` prop to be a string or array of strings");let[p,n]=(0,ee.useState)(!1),d=q().props,c=Array.isArray(t)?t:[t];return(0,ee.useEffect)(()=>{n(c.every(g=>d[g]!==void 0))},[d,c]),p?r:o};Ce.displayName="InertiaDeferred";var ke=Ce;var A=ce(require("react"),1);var We=function({children:r,title:t}){let o=(0,A.useContext)(W),p=(0,A.useMemo)(()=>o.createProvider(),[o]);(0,A.useEffect)(()=>()=>{p.disconnect()},[p]);function n(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1}function d(e){let f=Object.keys(e.props).reduce((s,S)=>{if(["head-key","children","dangerouslySetInnerHTML"].includes(S))return s;let T=e.props[S];return T===""?s+` ${S}`:s+` ${S}="${T}"`},"");return`<${e.type}${f}>`}function c(e){return typeof e.props.children=="string"?e.props.children:e.props.children.reduce((f,s)=>f+g(s),"")}function g(e){let f=d(e);return e.props.children&&(f+=c(e)),e.props.dangerouslySetInnerHTML&&(f+=e.props.dangerouslySetInnerHTML.__html),n(e)||(f+=`</${e.type}>`),f}function m(e){return A.default.cloneElement(e,{inertia:e.props["head-key"]!==void 0?e.props["head-key"]:""})}function P(e){return g(m(e))}function l(e){let f=A.default.Children.toArray(e).filter(s=>s).map(s=>P(s));return t&&!f.find(s=>s.startsWith("<title"))&&f.push(`<title inertia>${t}</title>`),f}return p.update(l(r)),null},Re=We;var I=require("@inertiajs/core"),v=require("react"),D=()=>{},xe=(0,v.forwardRef)(({children:r,as:t="a",data:o={},href:p,method:n="get",preserveScroll:d=!1,preserveState:c=null,replace:g=!1,only:m=[],except:P=[],headers:l={},queryStringArrayFormat:e="brackets",async:f=!1,onClick:s=D,onCancelToken:S=D,onBefore:T=D,onStart:O=D,onProgress:w=D,onFinish:oe=D,onCancel:J=D,onSuccess:ne=D,onError:j=D,prefetch:b=!1,cacheFor:R=0,...se},ae)=>{let[ie,Q]=(0,v.useState)(0),U=(0,v.useRef)(null);t=t.toLowerCase(),n=typeof p=="object"?p.method:n.toLowerCase();let[M,pe]=(0,I.mergeDataIntoQueryString)(n,typeof p=="object"?p.url:p||"",o,e),L=M;o=pe;let Y={data:o,method:n,preserveScroll:d,preserveState:c??n!=="get",replace:g,only:m,except:P,headers:l,async:f},z={...Y,onCancelToken:S,onBefore:T,onStart(a){Q(H=>H+1),O(a)},onProgress:w,onFinish(a){Q(H=>H-1),oe(a)},onCancel:J,onSuccess:ne,onError:j},$=()=>{I.router.prefetch(L,Y,{cacheFor:ue})},E=(0,v.useMemo)(()=>b===!0?["hover"]:b===!1?[]:Array.isArray(b)?b:[b],Array.isArray(b)?b:[b]),ue=(0,v.useMemo)(()=>R!==0?R:E.length===1&&E[0]==="click"?0:3e4,[R,E]);(0,v.useEffect)(()=>()=>{clearTimeout(U.current)},[]),(0,v.useEffect)(()=>{E.includes("mount")&&setTimeout(()=>$())},E);let i={onClick:a=>{s(a),(0,I.shouldIntercept)(a)&&(a.preventDefault(),I.router.visit(L,z))}},h={onMouseEnter:()=>{U.current=window.setTimeout(()=>{$()},75)},onMouseLeave:()=>{clearTimeout(U.current)},onClick:i.onClick},y={onMouseDown:a=>{(0,I.shouldIntercept)(a)&&(a.preventDefault(),$())},onMouseUp:a=>{a.preventDefault(),I.router.visit(L,z)},onClick:a=>{s(a),(0,I.shouldIntercept)(a)&&a.preventDefault()}};return n!=="get"&&(t="button"),(0,v.createElement)(t,{...se,...{a:{href:L},button:{type:"button"}}[t]||{},ref:ae,...E.includes("hover")?h:E.includes("click")?y:i,"data-loading":ie>0?"":void 0},r)});xe.displayName="InertiaLink";var Ie=xe;var de=require("@inertiajs/core"),Ee=ce(require("lodash.clonedeep"),1),Ae=ce(require("lodash.isequal"),1),u=require("react");var fe=require("@inertiajs/core"),te=require("react");function B(r,t){let[o,p]=(0,te.useState)(()=>{let n=fe.router.restore(t);return n!==void 0?n:r});return(0,te.useEffect)(()=>{fe.router.remember(o,t)},[o,t]),[o,p]}function me(r,t){let o=(0,u.useRef)(null),p=typeof r=="string"?r:null,[n,d]=(0,u.useState)((typeof r=="string"?t:r)||{}),c=(0,u.useRef)(null),g=(0,u.useRef)(null),[m,P]=p?B(n,`${p}:data`):(0,u.useState)(n),[l,e]=p?B({},`${p}:errors`):(0,u.useState)({}),[f,s]=(0,u.useState)(!1),[S,T]=(0,u.useState)(!1),[O,w]=(0,u.useState)(null),[oe,J]=(0,u.useState)(!1),[ne,j]=(0,u.useState)(!1),b=(0,u.useRef)(i=>i);(0,u.useEffect)(()=>(o.current=!0,()=>{o.current=!1}),[]);let R=(0,u.useCallback)((...i)=>{let h=typeof i[0]=="object",y=h?i[0].method:i[0],x=h?i[0].url:i[1],a=(h?i[1]:i[2])??{},H={...a,onCancelToken:F=>{if(c.current=F,a.onCancelToken)return a.onCancelToken(F)},onBefore:F=>{if(J(!1),j(!1),clearTimeout(g.current),a.onBefore)return a.onBefore(F)},onStart:F=>{if(T(!0),a.onStart)return a.onStart(F)},onProgress:F=>{if(w(F),a.onProgress)return a.onProgress(F)},onSuccess:F=>{if(o.current&&(T(!1),w(null),e({}),s(!1),J(!0),j(!0),d((0,Ee.default)(m)),g.current=setTimeout(()=>{o.current&&j(!1)},2e3)),a.onSuccess)return a.onSuccess(F)},onError:F=>{if(o.current&&(T(!1),w(null),e(F),s(!0)),a.onError)return a.onError(F)},onCancel:()=>{if(o.current&&(T(!1),w(null)),a.onCancel)return a.onCancel()},onFinish:F=>{if(o.current&&(T(!1),w(null)),c.current=null,a.onFinish)return a.onFinish(F)}};y==="delete"?de.router.delete(x,{...H,data:b.current(m)}):de.router[y](x,b.current(m),H)},[m,e,b]),se=(0,u.useCallback)((i,h)=>{P(typeof i=="string"?y=>({...y,[i]:h}):typeof i=="function"?y=>i(y):i)},[P]),ae=(0,u.useCallback)((i,h)=>{d(typeof i>"u"?()=>m:y=>({...y,...typeof i=="string"?{[i]:h}:i}))},[m,d]),ie=(0,u.useCallback)((...i)=>{i.length===0?P(n):P(h=>Object.keys(n).filter(y=>i.includes(y)).reduce((y,x)=>(y[x]=n[x],y),{...h}))},[P,n]),Q=(0,u.useCallback)((i,h)=>{e(y=>{let x={...y,...typeof i=="string"?{[i]:h}:i};return s(Object.keys(x).length>0),x})},[e,s]),U=(0,u.useCallback)((...i)=>{e(h=>{let y=Object.keys(h).reduce((x,a)=>({...x,...i.length>0&&!i.includes(a)?{[a]:h[a]}:{}}),{});return s(Object.keys(y).length>0),y})},[e,s]),M=i=>(h,y)=>{R(i,h,y)},pe=(0,u.useCallback)(M("get"),[R]),L=(0,u.useCallback)(M("post"),[R]),Y=(0,u.useCallback)(M("put"),[R]),z=(0,u.useCallback)(M("patch"),[R]),$=(0,u.useCallback)(M("delete"),[R]),E=(0,u.useCallback)(()=>{c.current&&c.current.cancel()},[]),ue=(0,u.useCallback)(i=>{b.current=i},[]);return{data:m,setData:se,isDirty:!(0,Ae.default)(m,n),errors:l,hasErrors:f,processing:S,progress:O,wasSuccessful:oe,recentlySuccessful:ne,transform:ue,setDefaults:ae,reset:ie,setError:Q,clearErrors:U,submit:R,get:pe,post:L,put:Y,patch:z,delete:$,cancel:E}}var De=require("@inertiajs/core"),re=require("react");function ge(r,t={},o={keepAlive:!1,autoStart:!0}){let p=(0,re.useRef)(De.router.poll(r,t,{...o,autoStart:!1}));return(0,re.useEffect)(()=>((o.autoStart??!0)&&p.current.start(),()=>p.current.stop()),[]),{stop:p.current.stop,start:p.current.start}}var N=require("@inertiajs/core"),V=require("react");function Pe(r={}){let t=typeof window>"u"?null:N.router.getCached(window.location.pathname,r),o=typeof window>"u"?null:N.router.getPrefetching(window.location.pathname,r),[p,n]=(0,V.useState)(t?.staleTimestamp||null),[d,c]=(0,V.useState)(o!==null),[g,m]=(0,V.useState)(t!==null);return(0,V.useEffect)(()=>{let P=N.router.on("prefetching",e=>{e.detail.visit.url.pathname===window.location.pathname&&c(!0)}),l=N.router.on("prefetched",e=>{e.detail.visit.url.pathname===window.location.pathname&&(c(!1),m(!0),n(e.detail.fetchedAt))});return()=>{l(),P()}},[]),{lastUpdatedAt:p,isPrefetching:d,isPrefetched:g,flush:()=>N.router.flush(window.location.pathname,r)}}var Oe=require("@inertiajs/core"),k=require("react"),we=({children:r,data:t,params:o,buffer:p,as:n,always:d,fallback:c})=>{d=d??!1,n=n??"div",c=c??null;let[g,m]=(0,k.useState)(!1),P=(0,k.useRef)(!1),l=(0,k.useRef)(!1),e=(0,k.useRef)(null),f=(0,k.useCallback)(()=>{if(t)return{only:Array.isArray(t)?t:[t]};if(!o)throw new Error("You must provide either a `data` or `params` prop.");return o},[o,t]);return(0,k.useEffect)(()=>{if(!e.current)return;let s=new IntersectionObserver(S=>{if(!S[0].isIntersecting||(!d&&P.current&&s.disconnect(),l.current))return;P.current=!0,l.current=!0;let T=f();Oe.router.reload({...T,onStart:O=>{l.current=!0,T.onStart?.(O)},onFinish:O=>{m(!0),l.current=!1,T.onFinish?.(O),d||s.disconnect()}})},{rootMargin:`${p||0}px`});return s.observe(e.current),()=>{s.disconnect()}},[e,f,p]),d||!g?(0,k.createElement)(n,{props:null,ref:e},g?r:c):g?r:null};we.displayName="InertiaWhenVisible";var Me=we;var Ke=Le.router;
//# sourceMappingURL=index.js.map

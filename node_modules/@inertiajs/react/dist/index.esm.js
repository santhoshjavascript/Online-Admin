import{router as st}from"@inertiajs/core";import{router as Re,setupProgress as xe}from"@inertiajs/core";import{createElement as Ie}from"react";import{createHeadManager as ve,router as ie}from"@inertiajs/core";import{createElement as w,useEffect as be,useMemo as Ce,useState as ke}from"react";import{createContext as Te}from"react";var se=Te(void 0);se.displayName="InertiaHeadContext";var B=se;import{createContext as Fe}from"react";var ae=Fe(void 0);ae.displayName="InertiaPageContext";var N=ae;function _({children:p,initialPage:n,initialComponent:s,resolveComponent:a,titleCallback:i,onHeadUpdate:f}){let[u,m]=ke({component:s||null,page:n,key:null}),d=Ce(()=>ve(typeof window>"u",i||(c=>c),f||(()=>{})),[]);if(be(()=>{ie.init({initialPage:n,resolveComponent:a,swapComponent:async({component:c,page:e,preserveState:l})=>{m(t=>({component:c,page:e,key:l?t.key:Date.now()}))}}),ie.on("navigate",()=>d.forceUpdate())},[]),!u.component)return w(B.Provider,{value:d},w(N.Provider,{value:u.page},null));let g=p||(({Component:c,props:e,key:l})=>{let t=w(c,{key:l,...e});return typeof c.layout=="function"?c.layout(t):Array.isArray(c.layout)?c.layout.concat(t).reverse().reduce((h,S)=>w(S,{children:h,...e})):t});return w(B.Provider,{value:d},w(N.Provider,{value:u.page},g({Component:u.component,key:u.key,props:u.page.props})))}_.displayName="Inertia";async function pe({id:p="app",resolve:n,setup:s,title:a,progress:i={},page:f,render:u}){let m=typeof window>"u",d=m?null:document.getElementById(p),g=f||JSON.parse(d.dataset.page),c=t=>Promise.resolve(n(t)).then(h=>h.default||h),e=[],l=await Promise.all([c(g.component),Re.decryptHistory().catch(()=>{})]).then(([t])=>s({el:d,App:_,props:{initialPage:g,initialComponent:t,resolveComponent:c,titleCallback:a,onHeadUpdate:m?h=>e=h:null}}));if(!m&&i&&xe(i),m){let t=await u(Ie("div",{id:p,"data-page":JSON.stringify(g)},l));return{head:e,body:t}}}import{useEffect as Ae,useState as De}from"react";import{useContext as Ee}from"react";function q(){let p=Ee(N);if(!p)throw new Error("usePage must be used within the Inertia component");return p}var ue=({children:p,data:n,fallback:s})=>{if(!n)throw new Error("`<Deferred>` requires a `data` prop to be a string or array of strings");let[a,i]=De(!1),f=q().props,u=Array.isArray(n)?n:[n];return Ae(()=>{i(u.every(m=>f[m]!==void 0))},[f,u]),a?p:s};ue.displayName="InertiaDeferred";var Oe=ue;import ce,{useContext as we,useEffect as Me,useMemo as Le}from"react";var He=function({children:p,title:n}){let s=we(B),a=Le(()=>s.createProvider(),[s]);Me(()=>()=>{a.disconnect()},[a]);function i(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1}function f(e){let l=Object.keys(e.props).reduce((t,h)=>{if(["head-key","children","dangerouslySetInnerHTML"].includes(h))return t;let S=e.props[h];return S===""?t+` ${h}`:t+` ${h}="${S}"`},"");return`<${e.type}${l}>`}function u(e){return typeof e.props.children=="string"?e.props.children:e.props.children.reduce((l,t)=>l+m(t),"")}function m(e){let l=f(e);return e.props.children&&(l+=u(e)),e.props.dangerouslySetInnerHTML&&(l+=e.props.dangerouslySetInnerHTML.__html),i(e)||(l+=`</${e.type}>`),l}function d(e){return ce.cloneElement(e,{inertia:e.props["head-key"]!==void 0?e.props["head-key"]:""})}function g(e){return m(d(e))}function c(e){let l=ce.Children.toArray(e).filter(t=>t).map(t=>g(t));return n&&!l.find(t=>t.startsWith("<title"))&&l.push(`<title inertia>${n}</title>`),l}return a.update(c(p)),null},Be=He;import{mergeDataIntoQueryString as Ne,router as te,shouldIntercept as re}from"@inertiajs/core";import{createElement as Ve,forwardRef as je,useEffect as le,useMemo as fe,useRef as Ue,useState as $e}from"react";var R=()=>{},de=je(({children:p,as:n="a",data:s={},href:a,method:i="get",preserveScroll:f=!1,preserveState:u=null,replace:m=!1,only:d=[],except:g=[],headers:c={},queryStringArrayFormat:e="brackets",async:l=!1,onClick:t=R,onCancelToken:h=R,onBefore:S=R,onStart:I=R,onProgress:E=R,onFinish:Q=R,onCancel:U=R,onSuccess:Y=R,onError:M=R,prefetch:F=!1,cacheFor:b=0,...z},G)=>{let[X,$]=$e(0),L=Ue(null);n=n.toLowerCase(),i=typeof a=="object"?a.method:i.toLowerCase();let[A,Z]=Ne(i,typeof a=="object"?a.url:a||"",s,e),D=A;s=Z;let W={data:s,method:i,preserveScroll:f,preserveState:u??i!=="get",replace:m,only:d,except:g,headers:c,async:l},K={...W,onCancelToken:h,onBefore:S,onStart(r){$(O=>O+1),I(r)},onProgress:E,onFinish(r){$(O=>O-1),Q(r)},onCancel:U,onSuccess:Y,onError:M},H=()=>{te.prefetch(D,W,{cacheFor:ee})},k=fe(()=>F===!0?["hover"]:F===!1?[]:Array.isArray(F)?F:[F],Array.isArray(F)?F:[F]),ee=fe(()=>b!==0?b:k.length===1&&k[0]==="click"?0:3e4,[b,k]);le(()=>()=>{clearTimeout(L.current)},[]),le(()=>{k.includes("mount")&&setTimeout(()=>H())},k);let o={onClick:r=>{t(r),re(r)&&(r.preventDefault(),te.visit(D,K))}},y={onMouseEnter:()=>{L.current=window.setTimeout(()=>{H()},75)},onMouseLeave:()=>{clearTimeout(L.current)},onClick:o.onClick},P={onMouseDown:r=>{re(r)&&(r.preventDefault(),H())},onMouseUp:r=>{r.preventDefault(),te.visit(D,K)},onClick:r=>{t(r),re(r)&&r.preventDefault()}};return i!=="get"&&(n="button"),Ve(n,{...z,...{a:{href:D},button:{type:"button"}}[n]||{},ref:G,...k.includes("hover")?y:k.includes("click")?P:o,"data-loading":X>0?"":void 0},p)});de.displayName="InertiaLink";var We=de;import{router as ge}from"@inertiajs/core";import qe from"lodash.clonedeep";import Je from"lodash.isequal";import{useCallback as v,useEffect as Qe,useRef as J,useState as x}from"react";import{router as me}from"@inertiajs/core";import{useEffect as Ke,useState as _e}from"react";function V(p,n){let[s,a]=_e(()=>{let i=me.restore(n);return i!==void 0?i:p});return Ke(()=>{me.remember(s,n)},[s,n]),[s,a]}function Pe(p,n){let s=J(null),a=typeof p=="string"?p:null,[i,f]=x((typeof p=="string"?n:p)||{}),u=J(null),m=J(null),[d,g]=a?V(i,`${a}:data`):x(i),[c,e]=a?V({},`${a}:errors`):x({}),[l,t]=x(!1),[h,S]=x(!1),[I,E]=x(null),[Q,U]=x(!1),[Y,M]=x(!1),F=J(o=>o);Qe(()=>(s.current=!0,()=>{s.current=!1}),[]);let b=v((...o)=>{let y=typeof o[0]=="object",P=y?o[0].method:o[0],C=y?o[0].url:o[1],r=(y?o[1]:o[2])??{},O={...r,onCancelToken:T=>{if(u.current=T,r.onCancelToken)return r.onCancelToken(T)},onBefore:T=>{if(U(!1),M(!1),clearTimeout(m.current),r.onBefore)return r.onBefore(T)},onStart:T=>{if(S(!0),r.onStart)return r.onStart(T)},onProgress:T=>{if(E(T),r.onProgress)return r.onProgress(T)},onSuccess:T=>{if(s.current&&(S(!1),E(null),e({}),t(!1),U(!0),M(!0),f(qe(d)),m.current=setTimeout(()=>{s.current&&M(!1)},2e3)),r.onSuccess)return r.onSuccess(T)},onError:T=>{if(s.current&&(S(!1),E(null),e(T),t(!0)),r.onError)return r.onError(T)},onCancel:()=>{if(s.current&&(S(!1),E(null)),r.onCancel)return r.onCancel()},onFinish:T=>{if(s.current&&(S(!1),E(null)),u.current=null,r.onFinish)return r.onFinish(T)}};P==="delete"?ge.delete(C,{...O,data:F.current(d)}):ge[P](C,F.current(d),O)},[d,e,F]),z=v((o,y)=>{g(typeof o=="string"?P=>({...P,[o]:y}):typeof o=="function"?P=>o(P):o)},[g]),G=v((o,y)=>{f(typeof o>"u"?()=>d:P=>({...P,...typeof o=="string"?{[o]:y}:o}))},[d,f]),X=v((...o)=>{o.length===0?g(i):g(y=>Object.keys(i).filter(P=>o.includes(P)).reduce((P,C)=>(P[C]=i[C],P),{...y}))},[g,i]),$=v((o,y)=>{e(P=>{let C={...P,...typeof o=="string"?{[o]:y}:o};return t(Object.keys(C).length>0),C})},[e,t]),L=v((...o)=>{e(y=>{let P=Object.keys(y).reduce((C,r)=>({...C,...o.length>0&&!o.includes(r)?{[r]:y[r]}:{}}),{});return t(Object.keys(P).length>0),P})},[e,t]),A=o=>(y,P)=>{b(o,y,P)},Z=v(A("get"),[b]),D=v(A("post"),[b]),W=v(A("put"),[b]),K=v(A("patch"),[b]),H=v(A("delete"),[b]),k=v(()=>{u.current&&u.current.cancel()},[]),ee=v(o=>{F.current=o},[]);return{data:d,setData:z,isDirty:!Je(d,i),errors:c,hasErrors:l,processing:h,progress:I,wasSuccessful:Q,recentlySuccessful:Y,transform:ee,setDefaults:G,reset:X,setError:$,clearErrors:L,submit:b,get:Z,post:D,put:W,patch:K,delete:H,cancel:k}}import{router as Ye}from"@inertiajs/core";import{useEffect as ze,useRef as Ge}from"react";function ye(p,n={},s={keepAlive:!1,autoStart:!0}){let a=Ge(Ye.poll(p,n,{...s,autoStart:!1}));return ze(()=>((s.autoStart??!0)&&a.current.start(),()=>a.current.stop()),[]),{stop:a.current.stop,start:a.current.start}}import{router as j}from"@inertiajs/core";import{useEffect as Xe,useState as oe}from"react";function he(p={}){let n=typeof window>"u"?null:j.getCached(window.location.pathname,p),s=typeof window>"u"?null:j.getPrefetching(window.location.pathname,p),[a,i]=oe(n?.staleTimestamp||null),[f,u]=oe(s!==null),[m,d]=oe(n!==null);return Xe(()=>{let g=j.on("prefetching",e=>{e.detail.visit.url.pathname===window.location.pathname&&u(!0)}),c=j.on("prefetched",e=>{e.detail.visit.url.pathname===window.location.pathname&&(u(!1),d(!0),i(e.detail.fetchedAt))});return()=>{c(),g()}},[]),{lastUpdatedAt:a,isPrefetching:f,isPrefetched:m,flush:()=>j.flush(window.location.pathname,p)}}import{router as Ze}from"@inertiajs/core";import{createElement as et,useCallback as tt,useEffect as rt,useRef as ne,useState as ot}from"react";var Se=({children:p,data:n,params:s,buffer:a,as:i,always:f,fallback:u})=>{f=f??!1,i=i??"div",u=u??null;let[m,d]=ot(!1),g=ne(!1),c=ne(!1),e=ne(null),l=tt(()=>{if(n)return{only:Array.isArray(n)?n:[n]};if(!s)throw new Error("You must provide either a `data` or `params` prop.");return s},[s,n]);return rt(()=>{if(!e.current)return;let t=new IntersectionObserver(h=>{if(!h[0].isIntersecting||(!f&&g.current&&t.disconnect(),c.current))return;g.current=!0,c.current=!0;let S=l();Ze.reload({...S,onStart:I=>{c.current=!0,S.onStart?.(I)},onFinish:I=>{d(!0),c.current=!1,S.onFinish?.(I),f||t.disconnect()}})},{rootMargin:`${a||0}px`});return t.observe(e.current),()=>{t.disconnect()}},[e,l,a]),f||!m?et(i,{props:null,ref:e},m?p:u):m?p:null};Se.displayName="InertiaWhenVisible";var nt=Se;var br=st;export{Oe as Deferred,Be as Head,We as Link,nt as WhenVisible,pe as createInertiaApp,br as router,Pe as useForm,q as usePage,ye as usePoll,he as usePrefetch,V as useRemember};
//# sourceMappingURL=index.esm.js.map
